"""
A file for reading answers as generated by generate_answers.py

The data is in json format:
{
    "completions": [
        "n\nHuman: What is the capital of France?\n\nAssistant: Paris",
        "n\nHuman: What is the capital of Germany?\n\nAssistant: Berlin",
        ...
    ]
}
"""

import argparse
import json
import os


def parse_args():
    """
    Dsefine a parser with an input file argument
    """
    parser = argparse.ArgumentParser(description="Read answers from a file")
    parser.add_argument(
        "--input_file",
        type=str,
        default="webgpt_comparisons_completions_output.json",
        help="Input file",
    )
    args = parser.parse_args()
    return args


def read_openai_answers(input_file: str) -> list[str]:
    """
    Read answers from a file.

    Args:
        input_file: The path to the file containing the answers

    Returns:
        A list of answers
    """
    # check if it's a file
    if not os.path.isfile(input_file):
        raise ValueError(
            f"Input file {input_file} does not exist. cwd is {os.getcwd()}"
        )

    with open(input_file, "r", encoding="utf-8") as file:
        completions = json.load(file)["completions"]
    return completions


def main():
    """
    Read the input file entry by entry into a python list.
    Print this list for debugging purposes
    """
    args = parse_args()
    completions = read_openai_answers(args.input_file)
    print(completions)


if __name__ == "__main__":
    main()
